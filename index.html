import React, { useState, useEffect } from 'react';
import { ExternalLink, Smartphone, Globe, Image, Github, Linkedin, CheckSquare, Palette, Terminal, Cpu, Code, User } from 'lucide-react';

export default function App() {
  const [mounted, setMounted] = useState(false);
  const [displayText, setDisplayText] = useState('');
  const [isDeleting, setIsDeleting] = useState(false);
  const [loopNum, setLoopNum] = useState(0);
  const [typingSpeed, setTypingSpeed] = useState(150);
  const [systemTime, setSystemTime] = useState('');

  const phrases = [
    "digital solutions",
    "modern websites",
    "creative apps",
    "impactful designs",
    "intuitive interfaces"
  ];

  const actions = [
    "Building",
    "Shaping",
    "Crafting",
    "Developing"
  ];

  useEffect(() => {
    const timer = setInterval(() => {
      const now = new Date();
      setSystemTime(now.toLocaleTimeString('de-DE', { hour12: false }));
    }, 1000);
    return () => clearInterval(timer);
  }, []);

  useEffect(() => {
    setMounted(true);
  }, []);

  useEffect(() => {
    let timer;
    const handleTyping = () => {
      const currentAction = actions[loopNum % actions.length];
      const currentPhrase = phrases[loopNum % phrases.length];
      const fullText = `${currentAction} ${currentPhrase}`;

      setDisplayText(isDeleting 
        ? fullText.substring(0, displayText.length - 1) 
        : fullText.substring(0, displayText.length + 1)
      );

      setTypingSpeed(isDeleting ? 40 : 80);

      if (!isDeleting && displayText === fullText) {
        timer = setTimeout(() => setIsDeleting(true), 2500);
      } else if (isDeleting && displayText === '') {
        setIsDeleting(false);
        setLoopNum(loopNum + 1);
      }
    };

    timer = setTimeout(handleTyping, typingSpeed);
    return () => clearTimeout(timer);
  }, [displayText, isDeleting, loopNum, typingSpeed]);

  if (!mounted) return null;

  return (
    <div className="min-h-screen bg-[#020617] text-white selection:bg-blue-500/40 selection:text-white font-sans overflow-x-hidden relative">
      
      {/* --- HINTERGRUND EFFEKTE --- */}
      <div className="fixed top-[-10%] left-[-10%] w-[40vw] h-[40vw] bg-blue-600/15 rounded-full blur-[120px] pointer-events-none animate-pulse-slow" />
      <div className="fixed bottom-[10%] right-[-5%] w-[50vw] h-[50vw] bg-indigo-600/10 rounded-full blur-[120px] pointer-events-none" />

      <div className="max-w-6xl mx-auto px-6 md:px-12 py-8 md:py-16 relative z-10">
        
        {/* --- SECTION A: HERO --- */}
        <header className="mb-12 md:mb-24 flex flex-col md:flex-row md:items-start justify-between gap-8 pt-6 md:pt-12">
          <div className="flex flex-col items-start">
            <h1 className="text-5xl md:text-8xl font-black tracking-tighter mb-6 md:mb-8 text-white">
              Philipp <span className="text-transparent bg-clip-text bg-gradient-to-b from-white to-slate-500">Dachtler</span>
            </h1>
            
            <div className="flex items-center text-lg md:text-3xl font-light text-slate-400 tracking-tight">
              <span className="min-h-[1.5em] flex items-center">
                {displayText}
                <span className="ml-2 w-[3px] h-[1em] bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.8)] animate-blink"></span>
              </span>
            </div>
          </div>

          {/* TERMINAL ELEMENT */}
          <div className="hidden lg:flex flex-col w-64 rounded-xl border border-white/10 bg-black/40 backdrop-blur-md overflow-hidden self-end mb-2 shadow-2xl">
            <div className="flex items-center justify-between px-3 py-2 bg-white/5 border-b border-white/5">
              <div className="flex gap-1.5">
                <div className="w-2.5 h-2.5 rounded-full bg-red-500/50"></div>
                <div className="w-2.5 h-2.5 rounded-full bg-yellow-500/50"></div>
                <div className="w-2.5 h-2.5 rounded-full bg-green-500/50"></div>
              </div>
              <Terminal size={12} className="text-slate-500" />
            </div>
            <div className="p-4 font-mono text-[10px] space-y-2">
              <div className="flex justify-between text-slate-400">
                <span className="text-blue-400">Status:</span>
                <span className="animate-pulse text-green-400">ACTIVE</span>
              </div>
              <div className="flex justify-between text-slate-400">
                <span>Location:</span>
                <span className="text-white">GERMANY</span>
              </div>
              <div className="flex justify-between text-slate-400">
                <span>Local Time:</span>
                <span className="text-white uppercase">{systemTime}</span>
              </div>
              <div className="flex justify-between text-slate-400">
                <span>Age:</span>
                <span className="text-white">16 Y/O</span>
              </div>
              <div className="pt-2 border-t border-white/5 flex items-center gap-2 text-[9px] text-slate-500 uppercase tracking-widest">
                <Cpu size={10} /> Local Setup
              </div>
            </div>
          </div>
        </header>

        {/* --- SECTION B: ÜBER MICH --- */}
        <section id="about" className="mb-24 md:mb-32">
          <div className="flex flex-col md:flex-row md:items-end gap-2 md:gap-4 mb-10">
            <h2 className="text-4xl font-bold text-white tracking-tight">Über mich</h2>
            <div className="h-px flex-grow bg-white/10 mb-2 hidden md:block"></div>
            <span className="text-blue-500 font-mono text-sm tracking-widest">/ INFO</span>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div className="md:col-span-2 space-y-6">
              <p className="text-xl md:text-2xl text-slate-300 font-light leading-relaxed">
                Ich bin <span className="text-blue-500 border-b-2 border-blue-500/50 pb-0.5 font-semibold">Philipp Dachtler</span>, 16 Jahre alt und probiere mich gerne an neuen digitalen Ideen aus.
              </p>
              <p className="text-slate-400 text-lg leading-relaxed">
                Es macht mir Spaß, kleine Apps, Tools oder Websites zu bauen, die im Alltag nützlich sind. In meiner Freizeit unterstütze ich dabei gerne meine Gemeinde, die Jugend oder Freunde mit meinen Projekten und Designs.
              </p>
            </div>
            
            <div className="space-y-4">
              <div className="p-6 rounded-2xl bg-white/[0.03] border border-white/5 backdrop-blur-sm">
                <div className="flex items-center gap-3 text-blue-400 mb-2">
                  <Code size={18} />
                  <span className="text-xs font-mono tracking-widest uppercase">Aktuell</span>
                </div>
                <p className="text-white font-medium leading-tight">Berrang Holding Verwaltungsgesellschaft</p>
                <p className="text-slate-500 text-sm mt-1">Auszubildender FI SI</p>
              </div>
              
              <div className="p-6 rounded-2xl bg-white/[0.03] border border-white/5 backdrop-blur-sm">
                <div className="flex items-center gap-3 text-purple-400 mb-2">
                  <User size={18} />
                  <span className="text-xs font-mono tracking-widest uppercase">Fokus</span>
                </div>
                <p className="text-white font-medium">Hobby-Entwicklung</p>
                <p className="text-slate-500 text-sm mt-1">Web-Apps & Design</p>
              </div>
            </div>
          </div>
        </section>

        {/* --- SECTION C: PROJECTS --- */}
        <section id="projects">
          <div className="flex flex-col md:flex-row md:items-end gap-2 md:gap-4 mb-12">
            <h2 className="text-4xl font-bold text-white tracking-tight">Beendete Projekte</h2>
            <div className="h-px flex-grow bg-white/10 mb-2 hidden md:block"></div>
            <span className="text-blue-500 font-mono text-sm tracking-widest">/ PROJECTS</span>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-10">
            <ProjectCard 
              title="Minimalistischer Planner"
              desc="Ein To-Do Planner ohne unnötigen Schnickschnack für besseren Fokus."
              tags={["Web App", "Productivity"]}
              icon={<CheckSquare size={22} />}
              color="cyan"
              link="https://nmmhw4cbc7-commits.github.io/to-dos/"
            />

            <ProjectCard 
              title="Farb Finder Tool"
              desc="Ein Tool um schnell passende Farben und Paletten zu finden."
              tags={["Tool", "Design"]}
              icon={<Palette size={22} />}
              color="pink"
              link="https://nmmhw4cbc7-commits.github.io/farbfinder/"
            />

            <ProjectCard 
              title="Bibelseminar App"
              desc="Web-App fürs Bibelseminar, optimiert für das Handy."
              tags={["App", "Mobile"]}
              icon={<Smartphone size={22} />}
              color="blue"
              link="https://nmmhw4cbc7-commits.github.io/bibelseminar/"
            />

            <ProjectCard 
              title="EW Metallvision"
              desc="Website-Projekt für EW Metallvision."
              tags={["Website", "Design"]}
              icon={<Globe size={22} />}
              color="blue"
              link="http://www.ew-metallvision.de"
            />

             <ProjectCard 
              title="Christliche Poster"
              desc="Design von Postern mit christlichen Inhalten."
              tags={["Design", "Graphics"]}
              icon={<Image size={22} />}
              color="purple"
              link="https://emptysite.my.canva.site/dein-poster"
            />
          </div>
        </section>

        {/* Footer */}
        <footer className="mt-24 md:mt-40 pb-10 border-t border-white/5 pt-10 flex flex-col items-center gap-10">
          
          <div className="group cursor-default inline-flex items-center gap-3 px-5 py-2.5 rounded-full bg-white/5 border border-white/10 backdrop-blur-md transition-all hover:border-blue-500/50 hover:bg-white/[0.08]">
            <span className="relative flex h-2.5 w-2.5">
              <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
              <span className="relative inline-flex rounded-full h-2.5 w-2.5 bg-blue-500"></span>
            </span>
            <span className="text-[10px] md:text-xs font-mono text-slate-400 tracking-widest uppercase">
              Aktuell: <span className="text-blue-400 font-bold">Jugendkompass App</span>
            </span>
          </div>

          <div className="w-full flex flex-col md:flex-row justify-between items-center gap-6 text-slate-500 font-mono text-[10px] uppercase tracking-[0.2em]">
            <p>© {new Date().getFullYear()} Philipp Dachtler</p>
            
            <div className="flex gap-8">
              <a 
                href="https://github.com/nmmhw4cbc7-commits" 
                target="_blank" 
                rel="noopener noreferrer" 
                className="flex items-center gap-2 hover:text-white transition-colors group"
              >
                <Github size={14} className="group-hover:text-blue-400 transition-colors" />
                <span>Github</span>
              </a>
              <a 
                href="https://www.linkedin.com/in/philipp-dachtler" 
                target="_blank" 
                rel="noopener noreferrer" 
                className="flex items-center gap-2 hover:text-white transition-colors group"
              >
                <Linkedin size={14} className="group-hover:text-blue-400 transition-colors" />
                <span>LinkedIn</span>
              </a>
            </div>
          </div>
        </footer>

      </div>

      <style>{`
        @keyframes blink {
          0%, 100% { opacity: 1; }
          50% { opacity: 0; }
        }
        .animate-blink { animation: blink 0.8s step-end infinite; }

        @keyframes pulse-slow {
          0%, 100% { transform: scale(1); opacity: 0.15; }
          50% { transform: scale(1.1); opacity: 0.25; }
        }
        .animate-pulse-slow { animation: pulse-slow 12s infinite ease-in-out; }
      `}</style>
    </div>
  );
}

function ProjectCard({ title, desc, tags, icon, color, link }) {
  const colorVariants = {
    cyan: 'hover:border-cyan-500/40 hover:shadow-[0_0_40px_rgba(6,182,212,0.1)]',
    purple: 'hover:border-purple-500/40 hover:shadow-[0_0_40px_rgba(168,85,247,0.1)]',
    blue: 'hover:border-blue-500/40 hover:shadow-[0_0_40px_rgba(59,130,246,0.1)]',
    pink: 'hover:border-pink-500/40 hover:shadow-[0_0_40px_rgba(236,72,153,0.1)]',
  };

  const iconColors = {
    cyan: 'text-cyan-400',
    purple: 'text-purple-400',
    blue: 'text-blue-400',
    pink: 'text-pink-400',
  };

  return (
    <div className={`
      group relative p-8 md:p-10 rounded-3xl 
      bg-white/[0.02] backdrop-blur-2xl 
      border border-white/[0.08] 
      transition-all duration-500 flex flex-col h-full
      ${colorVariants[color] || colorVariants.cyan}
    `}>
      <div className="flex justify-between items-start mb-8">
        <div className={`p-4 rounded-2xl bg-white/[0.03] border border-white/10 ${iconColors[color]} group-hover:scale-110 transition-transform duration-500`}>
          {icon}
        </div>
        {link && (
          <a 
            href={link} 
            target="_blank" 
            rel="noopener noreferrer"
            className="opacity-0 group-hover:opacity-100 transition-all duration-500 translate-x-2 group-hover:translate-x-0 p-2 hover:bg-white/10 rounded-full"
          >
            <ExternalLink size={20} className="text-slate-400 hover:text-white" />
          </a>
        )}
      </div>

      <h3 className="text-2xl font-bold text-white mb-3 tracking-tight">{title}</h3>
      <p className="text-slate-400 text-base leading-relaxed mb-8 font-light">
        {desc}
      </p>

      <div className="flex flex-wrap gap-2 mt-auto">
        {tags.map((tag, i) => (
          <span key={i} className="text-[10px] font-mono tracking-widest uppercase px-3 py-1 rounded-full bg-white/5 text-slate-300 border border-white/5">
            {tag}
          </span>
        ))}
      </div>
    </div>
  );
}
